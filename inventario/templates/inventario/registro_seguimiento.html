{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "Registro de Seguimiento" %}{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row mb-4">
        <div class="col-md-8">
            <h1 class="h3 mb-0 text-gray-800">
                <i class="fas fa-clipboard-check me-2"></i>
                {% trans "Registro de Seguimiento" %}
            </h1>
            <p class="text-muted">{% trans "Seleccione un lote para ver o registrar seguimiento diario" %}</p>
        </div>
        <div class="col-md-4 text-end">
            <a href="{% url 'inventario:lista_alimentos' %}" class="btn btn-secondary">
                <i class="fas fa-drumstick-bite me-1"></i> {% trans "Alimentos" %}
            </a>
            <a href="{% url 'inventario:lista_vacunas' %}" class="btn btn-secondary">
                <i class="fas fa-syringe me-1"></i> {% trans "Vacunas" %}
            </a>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">
                <i class="fas fa-layer-group me-2"></i>
                {% trans "Lotes Activos" %}
            </h5>
        </div>
        <div class="card-body">
            {% if lotes %}
                <div class="row row-cols-1 row-cols-md-3 g-4">
                    {% for lote in lotes %}
                        <div class="col">
                            <div class="card h-100 {% if lote.estado == 'PRODUCCION' %}border-success{% elif lote.estado == 'CRECIMIENTO' %}border-warning{% else %}border-info{% endif %}">
                                <div class="card-header {% if lote.estado == 'PRODUCCION' %}bg-success{% elif lote.estado == 'CRECIMIENTO' %}bg-warning{% else %}bg-info{% endif %} text-white">
                                    <h5 class="mb-0">{{ lote.codigo }}</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <strong>{% trans "Galpón:" %}</strong> {{ lote.galpon }}
                                    </div>
                                    <div class="mb-2">
                                        <strong>{% trans "Raza:" %}</strong> {{ lote.raza }}
                                    </div>
                                    <div class="mb-2">
                                        <strong>{% trans "Edad:" %}</strong> {{ lote.edad_semanas }} {% trans "semanas" %}
                                    </div>
                                    <div class="mb-2">
                                        <strong>{% trans "Aves:" %}</strong> {{ lote.cantidad_aves }}
                                    </div>
                                    <div class="mb-2">
                                        <strong>{% trans "Estado:" %}</strong>
                                        {% if lote.estado == 'PRODUCCION' %}
                                            <span class="badge bg-success">{% trans "Producción" %}</span>
                                        {% elif lote.estado == 'CRECIMIENTO' %}
                                            <span class="badge bg-warning">{% trans "Crecimiento" %}</span>
                                        {% else %}
                                            <span class="badge bg-info">{% trans "Levante" %}</span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="card-footer bg-transparent">
                                    <div class="d-grid gap-2">
                                        <a href="{% url 'inventario:seguimiento_lote' lote.id %}" class="btn btn-primary btn-sm">
                                            <i class="fas fa-history me-1"></i> {% trans "Ver Historial" %}
                                        </a>
                                        <a href="{% url 'inventario:nuevo_seguimiento' lote.id %}" class="btn btn-success btn-sm">
                                            <i class="fas fa-plus-circle me-1"></i> {% trans "Nuevo Registro" %}
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    {% trans "No hay lotes activos para registrar seguimiento." %}
                </div>
            {% endif %}
        </div>
    </div>
    
    <div class="card shadow-sm mt-4">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0">
                <i class="fas fa-info-circle me-2"></i>
                {% trans "Información Importante" %}
            </h5>
        </div>
        <div class="card-body">
            <div class="alert alert-warning">
                <h5 class="alert-heading">{% trans "Recomendaciones para el seguimiento" %}</h5>
                <ul>
                    <li>{% trans "Registre el seguimiento diario de cada lote para mantener un control preciso." %}</li>
                    <li>{% trans "Mida el peso promedio de las aves tomando una muestra representativa del lote." %}</li>
                    <li>{% trans "Registre la mortalidad diaria para detectar problemas a tiempo." %}</li>
                    <li>{% trans "Anote cualquier comportamiento inusual o síntoma en las observaciones." %}</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
